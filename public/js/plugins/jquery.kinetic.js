/*!
    jQuery.kinetic v1a2
    Dave Taylor http://the-taylors.org

    The MIT License (MIT)
    Copyright (c) <2011> <Dave Taylor http://the-taylors.org>
*/

(function(d){var q={decelerate:!0,slowdown:0.9,maxvelocity:40};if(!window.requestAnimationFrame)window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){window.setTimeout(b,1E3/60)}}();d.extend(d.support,{touch:"ontouchend"in document});var k=function(b,a){var c=b;b>0?b>a&&(c=a):b<0-a&&(c=0-a);return c},i=function(b,a){b[0].scrollLeft=a.scrollLeft=b[0].scrollLeft+a.velocity; if(Math.abs(a.velocity)>0)a.velocity=a.decelerate?Math.floor(Math.abs(a.velocity))===0?0:a.velocity*a.slowdown:a.velocity;b[0].scrollTop=a.scrollTop=b[0].scrollTop+a.velocityY;if(Math.abs(a.velocityY)>0)a.velocityY=a.decelerate?Math.floor(Math.abs(a.velocityY))===0?0:a.velocityY*a.slowdown:a.velocityY;(Math.abs(a.velocity)>0||Math.abs(a.velocityY)>0)&&window.requestAnimationFrame(function(){i(b,a)});typeof a.moved==="function"&&a.moved.call(b,{scrollLeft:a.scrollLeft,velocity:a.velocity,settings:a})}, r=function(b,a){b&&b==="start"&&this.each(function(){var b=d(this),e=d.extend(b.data("kinetic-settings"),a);if(e)e.decelerate=!1,i(b,e)});b&&b==="end"&&this.each(function(){var a=d(this).data("kinetic-settings");if(a)a.decelerate=!0})},s=function(b){this.addClass("kinetic-active").each(function(){var a=d.extend({},q,b),c=d(this),e,g=!1,f,j=!1,h=!1,l;a.velocity=0;a.velocityY=0;d.browser.msie&&c.bind("selectstart",function(){return!1});var m=function(){h=f=e=!1};d(document).mouseup(m).click(m);var n= function(b,c){h=!0;a.velocity=g=0;a.velocityY=j=0;e=b;f=c},o=function(){if(e&&g&&a.velocity===0)a.velocity=k(g-e,a.maxvelocity),a.velocityY=k(j-f,a.maxvelocity),e=g=h=!1,i(c,a)},p=function(b,d){if(h&&(e||f))a.velocity=0,a.velocityY=0,c[0].scrollLeft=l=c[0].scrollLeft-(b-e),c[0].scrollTop-=d-f,g=e,j=f,e=b,f=d,typeof a.moved==="function"&&a.moved.call(c,{scrollLeft:l,velocity:a.velocity,settings:a})};d.support.touch?(this.addEventListener("touchstart",function(a){n(a.touches[0].clientX,a.touches[0].clientY)}, !1),this.addEventListener("touchend",function(a){a.preventDefault&&a.preventDefault();o()},!1),this.addEventListener("touchmove",function(a){a.preventDefault&&a.preventDefault();p(a.touches[0].clientX,a.touches[0].clientY)},!1)):c.mousedown(function(a){n(a.clientX,a.clientY)}).mouseup(function(){o()}).mousemove(function(a){p(a.clientX,a.clientY)}).css("cursor","move");c.click(function(b){if(Math.abs(a.velocity)>0)return b.preventDefault(),!1});c.data("kinetic-settings",a)})};d.fn.kinetic=function(b){typeof b=== "string"?r.apply(this,arguments):s.call(this,b)}})(window.jQuery);